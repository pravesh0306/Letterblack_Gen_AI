<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LetterBlack AI Assistant for After Effects</title>
    
    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Modular CSS Files -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/panels.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="vscode-app">
        <!-- Header -->
        <header class="vscode-header">
            <div class="header-left">
                <div class="app-mascot" id="app-mascot">
                    <i class="fa-solid fa-robot"></i>
                </div>
                <div class="app-identity">
                    <span class="app-title">LetterBlack_Gen_AI</span>
                    <span class="app-subtitle">for After Effects</span>
                    <span class="app-credit">Created & Developed by pravesh.pandey@letterblack.ae</span>
                </div>
            </div>
            <div class="header-right">
                <button id="command-menu-trigger" class="header-btn" title="Command Palette (Ctrl+K)">
                    <i class="fa-solid fa-search"></i>
                </button>
                <div id="command-menu-panel" class="command-palette hidden">
                    <input type="text" id="command-search" class="command-palette-input" placeholder="Type a command or search...">
                    <div class="command-palette-content">
                        <p class="palette-empty">Start typing to search commands...</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat Area -->
            <section class="chat-area">
                <div class="context-bar">
                    <div class="context-left">
                        <button id="eye-toggle" class="context-btn" title="Toggle Visibility">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                        <nav class="breadcrumb">
                            <span class="breadcrumb-item">Comp</span>
                            <span class="breadcrumb-chevron">›</span>
                            <span class="breadcrumb-item">Layer</span>
                            <span class="breadcrumb-chevron">›</span>
                            <span class="breadcrumb-item">Property</span>
                        </nav>
                    </div>
                    <div class="context-right">
                        <span class="context-chip">Context Shared</span>
                    </div>
                </div>
                
                <div class="messages-container">
                    <div id="chat-messages" class="chat-messages">
                        <div class="message system">
                            <div class="message-content">
                                <h3>Welcome to LetterBlack AI Assistant</h3>
                                <p>Your VS Code-style AI assistant for After Effects. Ask questions, request scripts, or get help with your projects. Try asking me to create an animation script or explain an expression!</p>
                            </div>
                            <div class="message-timestamp">6:14 PM</div>
                        </div>
                    </div>
                </div>
                
                <div class="composer">
                    <div class="composer-main">
                        <textarea id="chat-input" class="composer-input" placeholder="Ask me about After Effects scripting, expressions, or get help with your project..." rows="1"></textarea>
                        <div class="composer-actions">
                            <button id="analyze-youtube" class="composer-btn" title="Analyze YouTube Tutorial">
                                <i class="fa-brands fa-youtube"></i>
                            </button>
                            <button id="send-button" class="composer-btn primary" title="Send (Ctrl+Enter)" disabled>
                                <i class="fa-solid fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    <div class="composer-footer">
                        <span class="char-count">0/1000</span>
                        <span class="shortcut-hint">Ctrl+Enter to send</span>
                    </div>
                </div>
            </section>
            
            <!-- Bottom Panel -->
            <section id="bottom-panel" class="bottom-panel">
                <div class="bottom-panel-header">
                    <div class="bottom-panel-tabs" role="tablist">
                        <button class="tab-btn active" data-tab="script-library" role="tab">
                            <i class="fa-solid fa-code"></i>
                            Script Library
                        </button>
                        <button class="tab-btn" data-tab="settings" role="tab">
                            <i class="fa-solid fa-cog"></i>
                            Settings
                        </button>
                        <button class="tab-btn" data-tab="chat-history" role="tab">
                            <i class="fa-solid fa-history"></i>
                            Chat History
                        </button>
                        <button class="tab-btn" data-tab="saved-scripts" role="tab">
                            <i class="fa-solid fa-bookmark"></i>
                            Saved Scripts
                        </button>
                        <button class="tab-btn" data-tab="project-tools" role="tab">
                            <i class="fa-solid fa-tools"></i>
                            Project Tools
                        </button>
                    </div>
                    <button id="bottom-panel-toggle" class="bottom-panel-toggle" title="Toggle Bottom Panel">
                        <i class="fa-solid fa-chevron-down"></i>
                    </button>
                </div>
                
                <div class="bottom-panel-content">
                    <!-- Script Library Tab -->
                    <div id="script-library-tab" class="tab-pane active" role="tabpanel">
                        <div class="script-editor-container">
                            <div class="editor-toolbar">
                                <span class="editor-title">Script Editor</span>
                                <div class="toolbar-actions">
                                    <button id="run-script" class="toolbar-btn primary">
                                        <i class="fa-solid fa-play"></i>
                                        Run Script
                                    </button>
                                    <button id="apply-expression" class="toolbar-btn">
                                        <i class="fa-solid fa-dna"></i>
                                        Apply Expression
                                    </button>
                                    <button id="save-script-btn" class="toolbar-btn">
                                        <i class="fa-solid fa-save"></i>
                                        Save
                                    </button>
                                    <button id="copy-script-btn" class="toolbar-btn">
                                        <i class="fa-solid fa-copy"></i>
                                        Copy
                                    </button>
                                    <button id="explain-script-btn" class="toolbar-btn">Explain</button>
                                </div>
                            </div>
                            <textarea id="script-editor" class="code-editor" placeholder="// Your ExtendScript code here...
// Example: Create a simple text animation
var comp = app.project.activeItem;
if (comp && comp instanceof CompItem) {
    var textLayer = comp.layers.addText('Hello World');
    // Add your animation code here
}"></textarea>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div id="settings-tab" class="tab-pane" role="tabpanel">
                        <div class="settings-form">
                            <fieldset class="setting-group">
                                <legend>API Configuration</legend>
                                <div class="config-field">
                                    <label for="api-provider">Provider</label>
                                    <select id="api-provider" class="setting-select">
                                        <option value="openai">OpenAI GPT</option>
                                        <option value="claude">Anthropic Claude</option>
                                        <option value="gemini" selected>Google Gemini</option>
                                    </select>
                                </div>
                                <div class="config-field">
                                    <label for="model-select">Model</label>
                                    <select id="model-select" class="setting-select">
                                        <option value="gpt-4">GPT-4</option>
                                        <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                                        <option value="gemini-pro" selected>Gemini Pro</option>
                                    </select>
                                </div>
                                <div class="config-field">
                                    <label for="api-key">API Key</label>
                                    <input type="password" id="api-key" class="setting-input" placeholder="Enter your API key">
                                </div>
                            </fieldset>
                            
                            <fieldset class="setting-group">
                                <legend>Context & Memory</legend>
                                <div class="config-field">
                                    <label for="memory-context">Project Context</label>
                                    <textarea id="memory-context" class="setting-textarea" placeholder="Describe your project, workflow, or any specific requirements..."></textarea>
                                </div>
                            </fieldset>
                            
                            <div class="settings-actions">
                                <button id="save-settings" class="toolbar-btn primary">Save Settings</button>
                                <button id="test-connection" class="toolbar-btn">Test Connection</button>
                            </div>
                        </div>
                    </div>

                    <!-- Chat History Tab -->
                    <div id="chat-history-tab" class="tab-pane" role="tabpanel">
                        <div class="chat-history-container">
                            <h3>Recent Conversations</h3>
                            <div class="history-list">
                                <div class="history-item">
                                    <div class="history-title">Text Animation Script</div>
                                    <div class="history-time">2 hours ago</div>
                                </div>
                                <div class="history-item">
                                    <div class="history-title">Expression Help</div>
                                    <div class="history-time">Yesterday</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Saved Scripts Tab -->
                    <div id="saved-scripts-tab" class="tab-pane" role="tabpanel">
                        <div class="saved-scripts-container">
                            <h3>Your Saved Scripts</h3>
                            <div class="scripts-grid">
                                <div class="script-card">
                                    <div class="script-title">Bounce Animation</div>
                                    <div class="script-description">Creates smooth bounce effect</div>
                                    <div class="script-actions">
                                        <button class="btn-small primary">Load</button>
                                        <button class="btn-small">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Tools Tab -->
                    <div id="project-tools-tab" class="tab-pane" role="tabpanel">
                        <div class="project-tools-container">
                            <h3>Project Tools</h3>
                            <div class="tools-grid">
                                <button class="tool-card">
                                    <i class="fa-solid fa-file-code"></i>
                                    <span>Generate Script Template</span>
                                </button>
                                <button class="tool-card">
                                    <i class="fa-solid fa-search"></i>
                                    <span>Analyze Project</span>
                                </button>
                                <button class="tool-card">
                                    <i class="fa-solid fa-magic-wand-sparkles"></i>
                                    <span>Optimize Performance</span>
                                </button>
                                <button class="tool-card">
                                    <i class="fa-solid fa-bug"></i>
                                    <span>Debug Helper</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <div class="status-indicator">
                    <div class="status-dot online"></div>
                    <span id="status-text">Ready</span>
                </div>
            </div>
            <div class="status-right">
                <span id="message-counter">0 Messages</span>
            </div>
        </footer>
    </div>

    <!-- Floating Mascot -->
    <div class="floating-mascot" data-tooltip="AI Assistant">
        <i class="fa-solid fa-robot"></i>
    </div>

    <!-- JavaScript Functionality -->
    <script>
        // Tab switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabPanes = document.querySelectorAll('.tab-pane');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and panes
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanes.forEach(pane => pane.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding pane
                    this.classList.add('active');
                    const targetPane = document.getElementById(targetTab + '-tab');
                    if (targetPane) {
                        targetPane.classList.add('active');
                    }
                });
            });
            
            // Bottom panel toggle
            const panelToggle = document.getElementById('bottom-panel-toggle');
            const bottomPanel = document.getElementById('bottom-panel');
            
            if (panelToggle && bottomPanel) {
                panelToggle.addEventListener('click', function() {
                    bottomPanel.classList.toggle('collapsed');
                });
            }
            
            // Command palette toggle with keyboard shortcut
            const commandTrigger = document.getElementById('command-menu-trigger');
            const commandPanel = document.getElementById('command-menu-panel');
            const commandSearch = document.getElementById('command-search');
            
            if (commandTrigger && commandPanel) {
                commandTrigger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    commandPanel.classList.toggle('hidden');
                    if (!commandPanel.classList.contains('hidden') && commandSearch) {
                        commandSearch.focus();
                    }
                });
                
                // Keyboard shortcut Ctrl+K
                document.addEventListener('keydown', function(e) {
                    if (e.ctrlKey && e.key === 'k') {
                        e.preventDefault();
                        commandPanel.classList.toggle('hidden');
                        if (!commandPanel.classList.contains('hidden') && commandSearch) {
                            commandSearch.focus();
                        }
                    }
                    if (e.key === 'Escape') {
                        commandPanel.classList.add('hidden');
                    }
                });
                
                // Close on outside click
                document.addEventListener('click', function(e) {
                    if (!commandPanel.contains(e.target) && !commandTrigger.contains(e.target)) {
                        commandPanel.classList.add('hidden');
                    }
                });
                
                // Command search functionality
                if (commandSearch) {
                    commandSearch.addEventListener('input', function() {
                        const query = this.value.toLowerCase();
                        const commands = commandPanel.querySelectorAll('.command-item');
                        
                        commands.forEach(cmd => {
                            const text = cmd.textContent.toLowerCase();
                            cmd.style.display = text.includes(query) ? 'block' : 'none';
                        });
                    });
                }
            }
            
            // Chat functionality with improvements
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');
            const messagesContainer = document.getElementById('chat-messages');
            const charCount = document.querySelector('.char-count');
            const messageCounter = document.querySelector('.message-counter');
            let messageCount = 0;
            
            if (chatInput) {
                // Auto-resize textarea
                chatInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120px) + '10px';
                    
                    // Update character count
                    if (charCount) {
                        charCount.textContent = this.value.length + '/1000';
                    }
                    
                    // Enable/disable send button
                    if (sendButton) {
                        sendButton.disabled = this.value.trim().length === 0;
                    }
                });
                
                // Send on Ctrl+Enter
                chatInput.addEventListener('keydown', function(e) {
                    if (e.ctrlKey && e.key === 'Enter') {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }
            
            if (sendButton) {
                sendButton.addEventListener('click', sendMessage);
            }
            
            function sendMessage() {
                if (!chatInput || !messagesContainer) return;
                
                const message = chatInput.value.trim();
                if (!message) return;
                
                // Add user message
                const userMsg = document.createElement('div');
                userMsg.className = 'message user';
                userMsg.innerHTML = `
                    <div class="message-content">
                        <p>${escapeHtml(message)}</p>
                    </div>
                    <div class="message-timestamp">${getCurrentTime()}</div>
                `;
                messagesContainer.appendChild(userMsg);
                
                // Clear input
                chatInput.value = '';
                chatInput.style.height = 'auto';
                if (charCount) charCount.textContent = '0/1000';
                if (sendButton) sendButton.disabled = true;
                
                // Update message counter
                messageCount += 1;
                if (messageCounter) {
                    messageCounter.textContent = messageCount + ' Messages';
                }
                
                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // Show typing indicator
                showTypingIndicator();
                
                // Simulate AI response after a delay
                setTimeout(() => {
                    hideTypingIndicator();
                    const aiMsg = document.createElement('div');
                    aiMsg.className = 'message system';
                    aiMsg.innerHTML = `
                        <div class="message-content">
                            <h3>AI Assistant</h3>
                            <p>I received your message: "${message}". This is a demo response. In a real implementation, this would connect to an AI service like Google Gemini.</p>
                        </div>
                        <div class="message-timestamp">${getCurrentTime()}</div>
                    `;
                    messagesContainer.appendChild(aiMsg);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    
                    messageCount += 1;
                    if (messageCounter) {
                        messageCounter.textContent = messageCount + ' Messages';
                    }
                }, 1500);
            }
            
            function showTypingIndicator() {
                const indicator = document.createElement('div');
                indicator.id = 'typing-indicator';
                indicator.className = 'message system';
                indicator.innerHTML = `
                    <div class="message-content">
                        <p style="opacity: 0.7;">AI is typing...</p>
                    </div>
                `;
                messagesContainer.appendChild(indicator);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
            
            function hideTypingIndicator() {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) {
                    indicator.remove();
                }
            }
            
            // Utility functions
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            function getCurrentTime() {
                return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }
            
            // Toolbar button functionality
            document.getElementById('run-script')?.addEventListener('click', function() {
                const editor = document.getElementById('script-editor');
                if (editor && editor.value.trim()) {
                    // Simulate script execution
                    const statusText = document.getElementById('status-text');
                    if (statusText) {
                        statusText.textContent = 'Running Script...';
                        setTimeout(() => {
                            statusText.textContent = 'Script Completed';
                            setTimeout(() => statusText.textContent = 'Ready', 2000);
                        }, 1000);
                    }
                    showNotification('Script executed successfully', 'success');
                } else {
                    showNotification('No script to run', 'warning');
                }
            });
            
            document.getElementById('save-script-btn')?.addEventListener('click', function() {
                const editor = document.getElementById('script-editor');
                if (editor && editor.value.trim()) {
                    const scriptName = prompt('Enter script name:');
                    if (scriptName) {
                        // Simulate saving to saved scripts
                        showNotification(`Script "${scriptName}" saved`, 'success');
                    }
                } else {
                    showNotification('No script to save', 'warning');
                }
            });
            
            document.getElementById('copy-script-btn')?.addEventListener('click', function() {
                const editor = document.getElementById('script-editor');
                if (editor && editor.value.trim()) {
                    navigator.clipboard.writeText(editor.value).then(() => {
                        showNotification('Script copied to clipboard', 'success');
                    }).catch(() => {
                        showNotification('Failed to copy script', 'error');
                    });
                } else {
                    showNotification('No script to copy', 'warning');
                }
            });
            
            // Settings functionality
            document.getElementById('save-settings')?.addEventListener('click', function() {
                const apiKey = document.getElementById('api-key')?.value;
                const provider = document.getElementById('api-provider')?.value;
                const model = document.getElementById('model-select')?.value;
                const context = document.getElementById('memory-context')?.value;
                
                // Save to localStorage (in real app, this would be more secure)
                localStorage.setItem('ai_settings', JSON.stringify({
                    apiKey, provider, model, context
                }));
                
                showNotification('Settings saved successfully', 'success');
            });
            
            // Load saved settings on startup
            try {
                const saved = JSON.parse(localStorage.getItem('ai_settings') || '{}');
                if (saved.apiKey) document.getElementById('api-key').value = saved.apiKey;
                if (saved.provider) document.getElementById('api-provider').value = saved.provider;
                if (saved.model) document.getElementById('model-select').value = saved.model;
                if (saved.context) document.getElementById('memory-context').value = saved.context;
            } catch (e) {
                console.log('No saved settings found');
            }
            
            // Mascot interaction
            const mascot = document.querySelector('.floating-mascot');
            if (mascot) {
                mascot.addEventListener('click', function() {
                    this.style.animation = 'mascotSpin 1s ease-in-out';
                    setTimeout(() => {
                        this.style.animation = '';
                    }, 1000);
                });
            }
            
            // Status bar updates
            updateStatusBar();
            setInterval(updateStatusBar, 30000); // Update every 30 seconds
        });
        
        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #252526;
                color: #ccc;
                padding: 8px 10px;
                border-radius: 3px;
                border-left: 6px solid ${type === 'success' ? '#22c55e' : type === 'error' ? '#ef4444' : type === 'warning' ? '#fbbf24' : '#3b82f6'};
                box-shadow: 0 8px 16px rgba(0,0,0,0.3);
                z-index: 1001;
                font-size: 11px;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Status bar updater
        function updateStatusBar() {
            const statusDot = document.querySelector('.status-dot');
            const now = new Date();
            
            if (statusDot) {
                statusDot.style.backgroundColor = '#22c55e'; // Online indicator
            }
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>

    <!-- CSS Files Structure -->
    <style id="file-structure-demo">
        /* 
        File Structure:
        
        css/
        ├── base.css          - Reset, typography, base variables
        ├── layout.css        - Grid, flexbox, main layout structure
        ├── components.css    - Buttons, forms, cards, reusable components
        ├── chat.css          - Chat specific styles
        ├── panels.css        - Bottom panel, tabs, modals
        ├── forms.css         - Input fields, selects, form styling
        └── animations.css    - Transitions, keyframes, hover effects
        
        js/
        ├── utils/
        │   └── helpers.js    - Utility functions, storage helpers
        ├── components/
        │   ├── tabs.js       - Tab switching logic
        │   ├── chat.js       - Chat functionality
        │   ├── panels.js     - Panel toggle, resize
        │   ├── commands.js   - Command palette
        │   ├── settings.js   - Settings management
        │   └── mascot.js     - Mascot animations
        └── app.js            - Main application initialization
        */
    </style>

    <!-- Inline styles for this demo (normally would be in separate files) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        /* BASE.CSS */
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1e1e1e;
            color: #d4d4d4;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
        }
        
        /* Reduce FontAwesome icon size */
        .fa-solid, .fa-brands, .fa-regular, [class*="fa-"] {
            font-size: 0.85em !important;
        }
        
        /* LAYOUT.CSS */
        .vscode-app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            border: 1px solid #3c3c3c;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chat-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background-color: #1e1e1e;
        }
        
        /* COMPONENTS.CSS */
        .vscode-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2d2d30;
            border-bottom: 1px solid #3c3c3c;
            padding: 8px 12px;
            position: relative;
        }
        
        .header-left, .header-right {
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .app-mascot {
            width: 28px;
            height: 28px;
            margin-right: 8px;
            border-radius: 4px;
            background: linear-gradient(135deg, #007acc 0%, #005f99 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .app-mascot:hover {
            transform: scale(1.1) rotate(10deg);
        }
        
        .app-identity {
            display: flex;
            flex-direction: column;
        }
        
        .app-title {
            font-size: 12px;
            font-weight: 600;
            color: #fff;
        }
        
        .app-subtitle {
            font-size: 9px;
            color: #888;
        }
        
        .app-credit {
            font-size: 8px;
            color: #666;
            margin-top: 1px;
        }
        
        .header-btn {
            background-color: transparent;
            border: none;
            color: #888;
            padding: 6px 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .header-btn:hover {
            background-color: #3c3c3c;
            color: #fff;
        }
        
        /* CHAT.CSS */
        .context-bar {
            padding: 6px 8px;
            background-color: #1e1e1e;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #3c3c3c;
        }
        
        .context-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .context-btn {
            background: transparent;
            border: none;
            color: #888;
            cursor: pointer;
            padding: 4px;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        
        .context-btn:hover {
            color: #fff;
            background-color: #3c3c3c;
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            font-size: 9px;
            color: #888;
        }
        
        .breadcrumb-item {
            color: #ccc;
        }
        
        .breadcrumb-chevron {
            color: #666;
            margin: 0 4px;
        }
        
        .context-chip {
            background-color: #3a3a3a;
            color: #ccc;
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .messages-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .message {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
        }
        
        .message-content {
            background-color: #252526;
            padding: 10px 12px;
            border-radius: 8px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.4;
        }
        
        .message.user {
            align-items: flex-end;
        }
        
        .message.user .message-content {
            background-color: #007acc;
            color: #fff;
        }
        
        .message-timestamp {
            font-size: 8px;
            color: #666;
        }
        
        .message.system h3 {
            font-size: 12px;
            font-weight: 600;
            margin: 0 0 6px 0;
            color: #fff;
        }
        
        .message p {
            font-size: 11px;
            margin: 0;
            line-height: 1.5;
        }
        
        .composer {
            background-color: #1e1e1e;
            border-top: 1px solid #3c3c3c;
            padding: 12px;
        }
        
        .composer-main {
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }
        
        .composer-input {
            flex-grow: 1;
            background-color: #3c3c3c;
            border: 1px solid #5a5a5a;
            color: #d4d4d4;
            padding: 10px;
            border-radius: 6px;
            resize: none;
            font-size: 5px;
            line-height: 4;
            min-height: 40px;
            max-height: 120px;
            font-family: inherit;
        }
        
        .composer-input:focus {
            outline: none;
            border-color: #007acc;
        }
        
        .composer-actions {
            display: flex;
            gap: 6px;
        }
        
        .composer-btn {
            background-color: #3c3c3c;
            border: none;
            color: #888;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .composer-btn.primary {
            background-color: #007acc;
            color: #fff;
        }
        
        .composer-btn:hover {
            background-color: #5a5a5a;
            color: #fff;
        }
        
        .composer-btn.primary:hover {
            background-color: #005f99;
        }
        
        .composer-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .composer-footer {
            display: flex;
            justify-content: space-between;
            font-size: 9px;
            color: #666;
            margin-top: 6px;
        }
        
        /* PANELS.CSS */
        .bottom-panel {
            background-color: #252526;
            border-top: 1px solid #3c3c3c;
            display: flex;
            flex-direction: column;
            height: 350px;
            transition: height 0.3s ease;
            flex-shrink: 0;
        }
        
        .bottom-panel.collapsed {
            height: 40px;
            overflow: hidden;
        }
        
        .bottom-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #252526;
            border-bottom: 1px solid #3c3c3c;
            padding: 0;
            min-height: 40px;
        }
        
        .bottom-panel-tabs {
            display: flex;
            flex-grow: 1;
            overflow-x: auto;
        }
        
        .tab-btn {
            background-color: transparent;
            border: none;
            color: #888;
            padding: 10px 16px;
            cursor: pointer;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 6px;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-size: 10px;
        }
        
        .tab-btn:hover {
            color: #fff;
            background-color: rgba(255,255,255,0.05);
        }
        
        .tab-btn.active {
            color: #fff;
            background-color: #1e1e1e;
            border-bottom-color: #007acc;
        }
        
        .bottom-panel-toggle {
            background-color: transparent;
            border: none;
            color: #888;
            padding: 10px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .bottom-panel-toggle:hover {
            background-color: #3c3c3c;
            color: #fff;
        }
        
        .bottom-panel-toggle i {
            transition: transform 0.3s ease;
        }
        
        .bottom-panel.collapsed .bottom-panel-toggle i {
            transform: rotate(180deg);
        }
        
        .bottom-panel-content {
            flex-grow: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .bottom-panel.collapsed .bottom-panel-content {
            display: none;
        }
        
        .tab-pane {
            display: none;
            flex-grow: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .tab-pane.active {
            display: flex;
            flex-direction: column;
        }
        
        /* FORMS.CSS */
        .script-editor-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .editor-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2d2d30;
            border: 1px solid #3c3c3c;
            border-bottom: none;
            padding: 8px 12px;
        }
        
        .editor-title {
            font-weight: 600;
            font-size: 11px;
        }
        
        .toolbar-actions {
            display: flex;
            gap: 6px;
        }
        
        .toolbar-btn {
            background-color: transparent;
            border: 1px solid #5a5a5a;
            color: #ccc;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 9px;
        }
        
        .toolbar-btn:hover {
            background-color: #3c3c3c;
        }
        
        .toolbar-btn.primary {
            background-color: #007acc;
            border-color: #007acc;
            color: #fff;
        }
        
        .toolbar-btn.primary:hover {
            background-color: #005f99;
        }
        
        .code-editor {
            width: 100%;
            flex-grow: 1;
            background-color: #1e1e1e;
            border: 1px solid #3c3c3c;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            padding: 12px;
            font-size: 11px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }
        
        .setting-group {
            border: 1px solid #3c3c3c;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
        }
        
        .setting-group legend {
            color: #fff;
            font-weight: 600;
            padding: 0 4px;
            font-size: 11px;
        }
        
        .config-field {
            display: flex;
            flex-direction: column;
            margin-bottom: 12px;
        }
        
        .config-field label {
            font-size: 10px;
            color: #ccc;
            margin-bottom: 4px;
        }
        
        .setting-input, .setting-select, .setting-textarea {
            background-color: #3c3c3c;
            border: 1px solid #5a5a5a;
            color: #d4d4d4;
            padding: 6px 8px;
            border-radius: 4px;
            font-size: 10px;
            resize: vertical;
        }
        
        .setting-textarea {
            min-height: 80px;
            font-family: inherit;
        }
        
        .settings-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        /* Command Palette */
        .command-palette {
            position: absolute;
            top: 100%;
            right: 0;
            width: 400px;
            max-height: 300px;
            background-color: 

        }